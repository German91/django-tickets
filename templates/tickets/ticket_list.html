{% extends 'base.html' %}

{% load bootstrap3 %}

{% block content %}

  <div class="row">
    <div class="col-xs-12 col-sm-10 col-sm-offset-1">
      <h1>My Tickets</h1>

      {% if tickets %}
        <div class="row">
          <div class="col-xs-12 col-sm-4">
            <form method="get" class="form">
              {% bootstrap_form tickets.form %}

              <div class="form-group">
                <button type="submit" class="btn btn-default">Filter</button>
              </div>
            </form>
          </div>
        </div>
      {% endif %}
      <hr />

      <div class="row">
        <div class="col-xs-12 col-sm-6 col-sm-offset-3">
          {% for ticket in tickets.qs %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">
                  <label
                  {% if ticket.status == 'OPEN' %}
                    class="label label-success"
                  {% elif status == 'REVIEW' %}
                    class="label label-info"
                  {% else %}
                    class="label label-warning"
                  {% endif %}>{{ ticket.status }}</label>

                  <a href="{% url 'ticket_edit' pk=ticket.pk %}">{{ ticket.title }}</a>
                </h3>
              </div>

              <div class="panel-body">
                <p>{{ ticket.description }}</p>
                <p><small>Created by {{ ticket.creator }}</small></p>
              </div>

              <div class="panel-footer">
                <a href="{% url 'ticket_delete' pk=ticket.pk %}" class="btn btn-danger">Remove</a>
              </div>
            </div>
          {% empty %}
              <div class="text-center">
                <h3>No Open tickets available</h3>
              </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

{% endblock %}
